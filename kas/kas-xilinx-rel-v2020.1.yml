header:
  version: 8

machine: qemu-zynq7
distro: petalinux

env:
  SHELL: bash

local_conf_header:

  000_xilinx_2020_1: |
    # BASE = "${COREBASE}/../.."
    MACHINE ??= "qemuzynq"
    # DL_DIR ?= "${BASE}/downloads"
    # SSTATE_DIR ?= "${BASE}/sstate-cache"
    #TMPDIR = "${TOPDIR}/tmp"
    #TMPDIR_versal = "${TOPDIR}/tmp-versal"
    DISTRO ?= "petalinux"
    PACKAGE_CLASSES ?= "package_rpm"
    #SDKMACHINE ?= "i686"
    EXTRA_IMAGE_FEATURES = "debug-tweaks"
    USER_CLASSES ?= "buildstats image-mklibs"
    #TEST_IMAGE = "1"
    #OE_TERMINAL = "auto"
    PATCHRESOLVE = "noop"
    BB_DISKMON_DIRS = "\
        STOPTASKS,${TMPDIR},1G,100K \
        STOPTASKS,${DL_DIR},1G,100K \
        STOPTASKS,${SSTATE_DIR},1G,100K \
        STOPTASKS,/tmp,100M,100K \
        ABORT,${TMPDIR},100M,1K \
        ABORT,${DL_DIR},100M,1K \
        ABORT,${SSTATE_DIR},100M,1K \
        ABORT,/tmp,10M,1K"
    #SSTATE_MIRRORS ?= "\
    #file://.* http://someserver.tld/share/sstate/PATH;downloadfilename=PATH \n \
    #file://.* file:///some/local/dir/sstate/PATH"
    XILINX_VER_MAIN = "2020.1"

    # Uncomment below lines to provide path for custom xsct trim
    # This is required for building Versal based devices, please fetch the
    # xsct-trim from Xilinx lounge area
    #
    #EXTERNAL_XSCT_TARBALL = "/proj/yocto/xsct-trim/2019.2_xsct_daily_latest"
    #VALIDATE_XSCT_CHECKSUM = '0'

    # XILINX_VIVADO_DESIGN_SUIT should point to the Vivado installation directly if you are using xilinx-mcs recipe in meta-xilinx-tools
    #XILINX_VIVADO_DESIGN_SUIT = "/proj/xbuilds/2018.3_daily_latest/installs/lin64/Vivado/2018.3"

    # INHERIT += "externalsrc"
    # PREFERRED_PROVIDER_virtual/kernel = "linux-xlnx-dev"
    # EXTERNALSRC_pn-linux-xlnx-dev = "${BASE}/sources/linux"
    # RM_WORK_EXCLUDE += "linux-xlnx-dev"

    # PREFERRED_PROVIDER_virtual/bootloader = "u-boot-xlnx-dev"
    # EXTERNALSRC_pn-u-boot-xlnx-dev = "${BASE}/sources/u-boot"
    # RM_WORK_EXCLUDE += "u-boot-xlnx-dev"

    PMU_FIRMWARE_DEPLOY_DIR = "${DEPLOY_DIR_IMAGE}"
    PMU_FIRMWARE_IMAGE_NAME = "pmu-firmware-${MACHINE}"

    CONF_VERSION = "1"
    PNBLACKLIST[qemu-native]="blacklist"
    PNBLACKLIST[nativesdk-qemu]="blacklist"

repos:
  poky:
    layers: # From bblayers.conf.sample
      sources/core/meta:
      sources/core/meta-poky:
      sources/meta-openembedded/meta-perl:
      sources/meta-openembedded/meta-python:
      sources/meta-openembedded/meta-filesystems:
      sources/meta-openembedded/meta-gnome:
      sources/meta-openembedded/meta-multimedia:
      sources/meta-openembedded/meta-networking:
      sources/meta-openembedded/meta-webserver:
      sources/meta-openembedded/meta-xfce:
      sources/meta-openembedded/meta-initramfs:
      sources/meta-openembedded/meta-oe:
      sources/meta-clang:
      sources/meta-browser:
      sources/meta-qt5:
      sources/meta-xilinx/meta-xilinx-bsp:
      sources/meta-xilinx/meta-xilinx-pynq:
      sources/meta-xilinx/meta-xilinx-contrib:
      sources/meta-xilinx-tools:
      sources/meta-petalinux:
      sources/meta-virtualization:
      sources/meta-openamp:
      sources/meta-jupyter:
      sources/meta-vitis-ai:
